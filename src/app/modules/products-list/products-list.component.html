<div
	*ngIf="products$ | async as products; else loader"
	class="scroll-container"
>
	<!-- <app-counter-input
		[formControl]="searchFormControl"
		[step]="100"
	></app-counter-input> -->
	<!-- formControlDirective => formControl.valueChanges.subscribe(value => {
		NG_VALUE_ACCESSOR|CounterInputComponent.writeValue(value);
	}) -->

	<!-- <mat-form-field appearance="fill">
		<mat-label>Search</mat-label>
		<input matInput [formControl]="searchFormControl"/>
	</mat-form-field>

	{{errors$ | async | json}} -->

	<!-- {{searchFormControl.value}}
	{{searchedText$ | async}} -->

	<!-- {{searchFormControl.touched}}
	{{searchFormControl.dirty}}
	{{searchFormControl.valid}} -->

	<!-- <mat-form-field appearance="fill">
		<mat-label>Search</mat-label> -->
	<!-- <input matInput [ngModel]="searchedText" (ngModelChange)="searchedText = $event"/> -->
	<!-- <input
			#searchInput="ngModel"
			matInput
			required
			appIsStringAsync
			[minlength]="3"
			[ngModelOptions]="{
				updateOn: 'blur'
			}"
			[(ngModel)]="searchedText"
		/> -->
	<!-- NgModel => exportAs: 'ngModel' -->
	<!-- </mat-form-field> -->
	<!-- {{searchInput.errors | json}} -->

	<!-- {{searchedText}} -->
	<!-- {{searchInput.touched}}
	{{searchInput.dirty}}
	{{searchInput.valid}} -->

	<ng-container
		*appPagination="
			let productsGroup of products
				| filterByParam : searchedText : 'name';
			elementsSize: 4;
			let allIndexes = allIndexes;
			let activeIndex = index;
			let next = next;
			let back = back;
			let selectIndex = selectIndex
		"
	>
		<div class="card-container">
			<app-product-card
				*ngFor="
					let product of productsGroup;
					let index = index;
					trackBy: trackById
				"
				class="product"
				[routerLink]="'/product/' + product._id"
				[product]="product"
			></app-product-card>
		</div>

		<div class="pagination-container">
			<button mat-icon-button (click)="back()">
				<mat-icon> chevron_left </mat-icon>
			</button>
			<div class="pagination__page-number-container">
				<button
					*ngFor="let index of allIndexes"
					mat-icon-button
					class="pagination__page-number"
					[class.pagination__page-number_active]="
						activeIndex === index
					"
					(click)="selectIndex(index)"
				>
					{{ index + 1 }}
				</button>
			</div>
			<button mat-icon-button (click)="next()">
				<mat-icon> chevron_right </mat-icon>
			</button>
		</div>
	</ng-container>
</div>

<ng-template #loader>
	<mat-spinner></mat-spinner>
</ng-template>
